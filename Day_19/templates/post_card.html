<div class="post">
  <div class="post-header">
    <strong><a href="{{ url_for('profile', username=post.author.username) }}">{{ post.author.username }}</a></strong>
    <small>{{ post.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
  </div>

  <div class="post-body">{{ post.content }}</div>

  <div class="post-actions">
    <form method="post" action="{{ url_for('like_post', post_id=post.id) }}">
      <button type="submit">❤️ {{ post.likes|length }}</button>
    </form>
    <span>{{ post.comments|length }} comments</span>
  </div>

  <div class="comments">
    {% for c in post.comments %}
      <div class="comment">
        <strong>{{ c.post.author.username }}</strong>: {{ c.content }}

        <small>{{ c.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
      </div>
    {% endfor %}
  </div>

  {% if current_user.is_authenticated %}
    <form method="post" action="{{ url_for('comment_post', post_id=post.id) }}">
      <input type="text" name="content" placeholder="Write a comment..." required>
      <button type="submit">Post</button>
    </form>
  {% endif %}
</div>
